import{d as J,g as V,h as A,j as K,x as M,q as Q,r as m,o as r,c as g,a as p,t as b,n as G,b as o,w as n,F as k,v as $,m as W,f as v,l as y}from"./index-f4655909.js";import{_ as j}from"./Input.vue_vue_type_script_setup_true_lang-7763cb61.js";const X={class:"flex flex-col gap-4 rounded-3xl bg-ice p-8 transition-background dark:bg-charcoal xl:p-12"},Y={class:"flex items-end gap-4"},Z={class:"text-2xl font-bold text-charcoal transition-font dark:text-ice"},ee={class:"flex flex-wrap gap-2"},te={key:0,class:"grid gap-8 xl:grid-cols-2"},le={class:"flex flex-col gap-4 rounded-3xl bg-ice p-8 transition-background dark:bg-charcoal xl:p-12 xl:last:odd:col-span-2"},ae={class:"flex items-center"},se={class:"mr-auto text-2xl font-bold text-charcoal transition-font dark:text-ice"},oe={class:"flex flex-wrap gap-2"},ce=J({__name:"Food",props:{party:Array,check:Object},emits:["update:food","update:validity"],setup(d,{emit:q}){const _=d,N=q,a=V([{name:"",price:"",guests:[]}]),i=V([{name:!1,price:!1,guests:!1}]),h=V(!1),x=A(()=>{let e=0;for(let t of a.value)e+=Number(t.price);return e===0?e.toString():e.toFixed(2)}),L=A(()=>{var e;return a.value.length>0&&a.value.every(t=>t.name!==""&&Number(t.price)>0&&t.guests.length>0)&&x.value===((e=_.check)==null?void 0:e.subtotal)});K(()=>{N("update:food",a.value),N("update:validity",L.value)}),M(()=>{var e;for(let t of a.value){let c=[];for(let u of t.guests)(e=_.party)!=null&&e.includes(u)||c.push(u);for(let u of c)t.guests.splice(t.guests.indexOf(u),1)}}),Q((e,t)=>{h.value=!0});function S(){a.value.push({name:"",price:"",guests:[]}),i.value.push({name:!1,price:!1,guests:!1})}function O(e){i.value.splice(a.value.indexOf(e),1),a.value.splice(a.value.indexOf(e),1)}function T(e){var t;if((t=_.party)!=null&&t.every(c=>e.guests.includes(c)))e.guests=[];else for(let c of _.party)e.guests.includes(c)||e.guests.push(c);i.value[a.value.indexOf(e)].guests=!0}function z(e,t){e.guests.includes(t)?e.guests.splice(e.guests.indexOf(t),1):e.guests.push(t),i.value[a.value.indexOf(e)].guests=!0}return(e,t)=>{var U,w,F;const c=m("md-divider"),u=m("md-icon"),B=m("md-assist-chip"),D=m("md-suggestion-chip"),E=m("md-outlined-icon-button"),P=m("md-filter-chip"),R=m("md-text-button");return r(),g(k,null,[p("div",X,[p("div",Y,[p("h1",Z,"Total: $"+b(x.value||0),1),p("h1",{class:G(["text-xl font-bold transition-font",{"text-gunmetal  dark:text-silver":a.value.length===0||x.value===((U=d.check)==null?void 0:U.subtotal),"text-red":a.value.length>0&&x.value!==((w=d.check)==null?void 0:w.subtotal)}])},"/ $"+b(((F=d.check)==null?void 0:F.subtotal)||0),3)]),o(c),p("div",ee,[o(B,{label:"Items",disabled:""},{default:n(()=>[o(u,{slot:"icon"},{default:n(()=>[v("restaurant")]),_:1})]),_:1}),(r(!0),g(k,null,$(a.value,(l,f)=>(r(),y(D,{label:l.name||"Item "+(f+1),onClick:C=>O(l)},{default:n(()=>[o(u,{slot:"icon"},{default:n(()=>[v("close")]),_:1})]),_:2},1032,["label","onClick"]))),256))])]),a.value.length>0?(r(),g("div",te,[(r(!0),g(k,null,$(a.value,(l,f)=>{var C;return r(),g("div",le,[p("div",ae,[p("h1",se,b(l.name||"Item #"+(f+1))+": $"+b(l.price||0),1),o(E,{onClick:s=>O(l)},{default:n(()=>[o(u,null,{default:n(()=>[v("close")]),_:1})]),_:2},1032,["onClick"])]),o(j,{type:"text",label:"Item",icon:"restaurant","error-text":"Item name is required.",error:(i.value[f].name||h.value)&&l.name==="",modelValue:l.name,"onUpdate:modelValue":s=>l.name=s,onInput:s=>i.value[f].name=!0},null,8,["error","modelValue","onUpdate:modelValue","onInput"]),o(j,{type:"currency",label:"Price",icon:"payments","error-text":"Item price must be more than $0.",error:(i.value[f].price||h.value)&&Number(l.price)<=0,modelValue:l.price,"onUpdate:modelValue":s=>l.price=s,onInput:s=>i.value[f].price=!0},null,8,["error","modelValue","onUpdate:modelValue","onInput"]),o(c),p("div",oe,[o(B,{label:"Guests",disabled:!d.party||((C=d.party)==null?void 0:C.length)===0,onClick:s=>T(l)},{default:n(()=>{var s,I;return[((s=d.party)==null?void 0:s.length)===0||!((I=d.party)!=null&&I.every(H=>l.guests.includes(H)))?(r(),y(u,{key:0,slot:"icon"},{default:n(()=>[v("check")]),_:1})):(r(),y(u,{key:1,slot:"icon"},{default:n(()=>[v("close")]),_:1}))]}),_:2},1032,["disabled","onClick"]),(r(!0),g(k,null,$(d.party,s=>(r(),y(P,{class:G({error:(i.value[f].guests||h.value)&&l.guests.length===0}),label:s,selected:l.guests.includes(s),onClick:I=>z(l,s)},{default:n(()=>[o(u,{slot:"icon"},{default:n(()=>[v("add")]),_:1})]),_:2},1032,["class","label","selected","onClick"]))),256))])])}),256))])):W("",!0),o(R,{onClick:S},{default:n(()=>[o(u,{slot:"icon"},{default:n(()=>[v("add")]),_:1}),v("Add item")]),_:1})],64)}}});export{ce as default};
