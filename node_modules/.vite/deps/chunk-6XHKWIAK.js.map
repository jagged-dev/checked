{
  "version": 3,
  "sources": ["../../@material/web/tabs/internal/tab.ts"],
  "sourcesContent": ["/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport '../../elevation/elevation.js';\nimport '../../focus/md-focus-ring.js';\nimport '../../ripple/ripple.js';\n\nimport {html, isServer, LitElement, nothing} from 'lit';\nimport {property, query, queryAssignedElements, queryAssignedNodes, state} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\n\nimport {polyfillElementInternalsAria, setupHostAria} from '../../internal/aria/aria.js';\nimport {EASING} from '../../internal/motion/animation.js';\n\n/**\n * Symbol for tabs to use to animate their indicators based off another tab's\n * indicator.\n */\nconst INDICATOR = Symbol('indicator');\n\n/**\n * Symbol used by the tab bar to request a tab to animate its indicator from a\n * previously selected tab.\n */\nexport const ANIMATE_INDICATOR = Symbol('animateIndicator');\n\n/**\n * Tab component.\n */\nexport class Tab extends LitElement {\n  static {\n    setupHostAria(Tab);\n  }\n\n  /**\n   * The attribute `md-tab` indicates that the element is a tab for the parent\n   * element, `<md-tabs>`. Make sure if you're implementing your own `md-tab`\n   * component that you have an `md-tab` attribute set.\n   */\n  @property({type: Boolean, reflect: true, attribute: 'md-tab'})\n  readonly isTab = true;\n\n  /**\n   * Whether or not the tab is selected.\n   **/\n  @property({type: Boolean, reflect: true}) active = false;\n\n  /**\n   * TODO(b/293476210): remove after migrating\n   * @deprecated use `active`\n   */\n  @property({type: Boolean})\n  get selected() {\n    return this.active;\n  }\n  set selected(active: boolean) {\n    this.active = active;\n  }\n\n  /**\n   * In SSR, set this to true when an icon is present.\n   */\n  @property({type: Boolean, attribute: 'has-icon'}) hasIcon = false;\n\n  /**\n   * In SSR, set this to true when there is no label and only an icon.\n   */\n  @property({type: Boolean, attribute: 'icon-only'}) iconOnly = false;\n\n  @query('.indicator') readonly[INDICATOR]!: HTMLElement|null;\n  @state() protected fullWidthIndicator = false;\n  @queryAssignedNodes({flatten: true})\n  private readonly assignedDefaultNodes!: Node[];\n  @queryAssignedElements({slot: 'icon', flatten: true})\n  private readonly assignedIcons!: HTMLElement[];\n  private readonly internals = polyfillElementInternalsAria(\n      this, (this as HTMLElement /* needed for closure */).attachInternals());\n\n  constructor() {\n    super();\n    if (!isServer) {\n      this.internals.role = 'tab';\n      this.addEventListener('keydown', this.handleKeydown.bind(this));\n    }\n  }\n\n  protected override render() {\n    const indicator = html`<div class=\"indicator\"></div>`;\n    return html`\n      <div class=\"button\" role=\"presentation\" @click=${this.handleContentClick}>\n        <md-focus-ring part=\"focus-ring\" inward\n            .control=${this}></md-focus-ring>\n        <md-elevation></md-elevation>\n        <md-ripple .control=${this}></md-ripple>\n        <div class=\"content ${classMap(this.getContentClasses())}\"\n            role=\"presentation\">\n          <slot name=\"icon\" @slotchange=${this.handleIconSlotChange}></slot>\n          <slot @slotchange=${this.handleSlotChange}></slot>\n          ${this.fullWidthIndicator ? nothing : indicator}\n        </div>\n        ${this.fullWidthIndicator ? indicator : nothing}\n      </div>`;\n  }\n\n  protected getContentClasses() {\n    return {\n      'has-icon': this.hasIcon,\n      'has-label': !this.iconOnly,\n    };\n  }\n\n  protected override updated() {\n    this.internals.ariaSelected = String(this.active);\n  }\n\n  private async handleKeydown(event: KeyboardEvent) {\n    // Allow event to bubble.\n    await 0;\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    if (event.key === 'Enter' || event.key === ' ') {\n      // Prevent default behavior such as scrolling when pressing spacebar.\n      event.preventDefault();\n      this.click();\n    }\n  }\n\n  private handleContentClick(event: Event) {\n    // Ensure the \"click\" target is always the tab, and not content, by stopping\n    // propagation of content clicks and re-clicking the host.\n    event.stopPropagation();\n    this.click();\n  }\n\n  [ANIMATE_INDICATOR](previousTab: Tab) {\n    if (!this[INDICATOR]) {\n      return;\n    }\n\n    this[INDICATOR].getAnimations().forEach(a => {\n      a.cancel();\n    });\n    const frames = this.getKeyframes(previousTab);\n    if (frames !== null) {\n      this[INDICATOR].animate(\n          frames, {duration: 250, easing: EASING.EMPHASIZED});\n    }\n  }\n\n  private getKeyframes(previousTab: Tab) {\n    const reduceMotion = shouldReduceMotion();\n    if (!this.active) {\n      return reduceMotion ? [{'opacity': 1}, {'transform': 'none'}] : null;\n    }\n\n    const from: Keyframe = {};\n    const fromRect =\n        previousTab[INDICATOR]?.getBoundingClientRect() ?? ({} as DOMRect);\n    const fromPos = fromRect.left;\n    const fromExtent = fromRect.width;\n    const toRect = this[INDICATOR]!.getBoundingClientRect();\n    const toPos = toRect.left;\n    const toExtent = toRect.width;\n    const scale = fromExtent / toExtent;\n    if (!reduceMotion && fromPos !== undefined && toPos !== undefined &&\n        !isNaN(scale)) {\n      from['transform'] = `translateX(${\n          (fromPos - toPos).toFixed(4)}px) scaleX(${scale.toFixed(4)})`;\n    } else {\n      from['opacity'] = 0;\n    }\n    // note, including `transform: none` avoids quirky Safari behavior\n    // that can hide the animation.\n    return [from, {'transform': 'none'}];\n  }\n\n  private handleSlotChange() {\n    this.iconOnly = false;\n    // Check if there's any label text or elements. If not, then there is only\n    // an icon.\n    for (const node of this.assignedDefaultNodes) {\n      const hasTextContent = node.nodeType === Node.TEXT_NODE &&\n          !!(node as Text).wholeText.match(/\\S/);\n      if (node.nodeType === Node.ELEMENT_NODE || hasTextContent) {\n        return;\n      }\n    }\n\n    this.iconOnly = true;\n  }\n\n  private handleIconSlotChange() {\n    this.hasIcon = this.assignedIcons.length > 0;\n  }\n}\n\nfunction shouldReduceMotion() {\n  return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n"],
  "mappings": "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",
  "names": ["_a"]
}
